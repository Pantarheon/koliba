/*

	byte255.c

	Copyright 2019 G. Adam Stanislav
	All rights reserved

	Redistribution and use in source and binary forms,
	with or without modification, are permitted provided
	that the following conditions are met:

	1. Redistributions of source code must retain the
	above copyright notice, this list of conditions
	and the following disclaimer.

	2. Redistributions in binary form must reproduce the
	above copyright notice, this list of conditions and
	the following disclaimer in the documentation and/or
	other materials provided with the distribution.

	3. Neither the name of the copyright holder nor the
	names of its contributors may be used to endorse or
	promote products derived from this software without
	specific prior written permission.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS
	AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED
	WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
	IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
	FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
	SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
	FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY,
	OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
	DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
	CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
	STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
	OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/

// We cannot include koliba.h here because
// C has no way of declaring doubles as hex
// values. But we can "cheat" by declaring
// these as uint64_t values here but as
// doubles in koliba.h and the C compiler
// will be no wiser.
//
// But we still need to copy the export
// functionality from koliba.h here.

#ifdef	_WIN32
typedef	unsigned long long uint64_t;
#else
#include <stdint.h>
#endif

#if defined _WIN32
#ifdef	DLL
# define	KLBDC	__declspec(dllexport)
#else	// !DLL
# define	KLBDC	__declspec(dllimport)
#endif	// DLL
#elif defined __APPLE__ || defined linux || defined __FreeBSD__
#  define KLBDC __attribute__((visibility("default")))
#else	// !_WIN32 !__APPLE__ !linux !__FreeBSD__
# define	KLBDC
#endif	// _WIN32

#ifdef __cplusplus
extern "C" {
#endif


// Quick lookup table.
KLBDC const uint64_t KOLIBA_ByteDiv255[256] = {
	0x0,	// 0	0 = 0/255
	0x3F70101010101010,	// 1	0.00392157 = 1/255
	0x3F80101010101010,	// 2	0.00784314 = 2/255
	0x3F88181818181818,	// 3	0.0117647 = 3/255
	0x3F90101010101010,	// 4	0.0156863 = 4/255
	0x3F94141414141414,	// 5	0.0196078 = 5/255
	0x3F98181818181818,	// 6	0.0235294 = 6/255
	0x3F9C1C1C1C1C1C1C,	// 7	0.027451 = 7/255
	0x3FA0101010101010,	// 8	0.0313725 = 8/255
	0x3FA2121212121212,	// 9	0.0352941 = 9/255
	0x3FA4141414141414,	// 10	0.0392157 = 10/255
	0x3FA6161616161616,	// 11	0.0431373 = 11/255
	0x3FA8181818181818,	// 12	0.0470588 = 12/255
	0x3FAA1A1A1A1A1A1A,	// 13	0.0509804 = 13/255
	0x3FAC1C1C1C1C1C1C,	// 14	0.054902 = 14/255
	0x3FAE1E1E1E1E1E1E,	// 15	0.0588235 = 15/255
	0x3FB0101010101010,	// 16	0.0627451 = 16/255
	0x3FB1111111111111,	// 17	0.0666667 = 17/255
	0x3FB2121212121212,	// 18	0.0705882 = 18/255
	0x3FB3131313131313,	// 19	0.0745098 = 19/255
	0x3FB4141414141414,	// 20	0.0784314 = 20/255
	0x3FB5151515151515,	// 21	0.0823529 = 21/255
	0x3FB6161616161616,	// 22	0.0862745 = 22/255
	0x3FB7171717171717,	// 23	0.0901961 = 23/255
	0x3FB8181818181818,	// 24	0.0941176 = 24/255
	0x3FB9191919191919,	// 25	0.0980392 = 25/255
	0x3FBA1A1A1A1A1A1A,	// 26	0.101961 = 26/255
	0x3FBB1B1B1B1B1B1B,	// 27	0.105882 = 27/255
	0x3FBC1C1C1C1C1C1C,	// 28	0.109804 = 28/255
	0x3FBD1D1D1D1D1D1D,	// 29	0.113725 = 29/255
	0x3FBE1E1E1E1E1E1E,	// 30	0.117647 = 30/255
	0x3FBF1F1F1F1F1F1F,	// 31	0.121569 = 31/255
	0x3FC0101010101010,	// 32	0.12549 = 32/255
	0x3FC0909090909091,	// 33	0.129412 = 33/255
	0x3FC1111111111111,	// 34	0.133333 = 34/255
	0x3FC1919191919192,	// 35	0.137255 = 35/255
	0x3FC2121212121212,	// 36	0.141176 = 36/255
	0x3FC2929292929293,	// 37	0.145098 = 37/255
	0x3FC3131313131313,	// 38	0.14902 = 38/255
	0x3FC3939393939394,	// 39	0.152941 = 39/255
	0x3FC4141414141414,	// 40	0.156863 = 40/255
	0x3FC4949494949495,	// 41	0.160784 = 41/255
	0x3FC5151515151515,	// 42	0.164706 = 42/255
	0x3FC5959595959596,	// 43	0.168627 = 43/255
	0x3FC6161616161616,	// 44	0.172549 = 44/255
	0x3FC6969696969697,	// 45	0.176471 = 45/255
	0x3FC7171717171717,	// 46	0.180392 = 46/255
	0x3FC7979797979798,	// 47	0.184314 = 47/255
	0x3FC8181818181818,	// 48	0.188235 = 48/255
	0x3FC8989898989899,	// 49	0.192157 = 49/255
	0x3FC9191919191919,	// 50	0.196078 = 50/255
	0x3FC999999999999A,	// 51	0.2 = 51/255
	0x3FCA1A1A1A1A1A1A,	// 52	0.203922 = 52/255
	0x3FCA9A9A9A9A9A9B,	// 53	0.207843 = 53/255
	0x3FCB1B1B1B1B1B1B,	// 54	0.211765 = 54/255
	0x3FCB9B9B9B9B9B9C,	// 55	0.215686 = 55/255
	0x3FCC1C1C1C1C1C1C,	// 56	0.219608 = 56/255
	0x3FCC9C9C9C9C9C9D,	// 57	0.223529 = 57/255
	0x3FCD1D1D1D1D1D1D,	// 58	0.227451 = 58/255
	0x3FCD9D9D9D9D9D9E,	// 59	0.231373 = 59/255
	0x3FCE1E1E1E1E1E1E,	// 60	0.235294 = 60/255
	0x3FCE9E9E9E9E9E9F,	// 61	0.239216 = 61/255
	0x3FCF1F1F1F1F1F1F,	// 62	0.243137 = 62/255
	0x3FCF9F9F9F9F9FA0,	// 63	0.247059 = 63/255
	0x3FD0101010101010,	// 64	0.25098 = 64/255
	0x3FD0505050505050,	// 65	0.254902 = 65/255
	0x3FD0909090909091,	// 66	0.258824 = 66/255
	0x3FD0D0D0D0D0D0D1,	// 67	0.262745 = 67/255
	0x3FD1111111111111,	// 68	0.266667 = 68/255
	0x3FD1515151515151,	// 69	0.270588 = 69/255
	0x3FD1919191919192,	// 70	0.27451 = 70/255
	0x3FD1D1D1D1D1D1D2,	// 71	0.278431 = 71/255
	0x3FD2121212121212,	// 72	0.282353 = 72/255
	0x3FD2525252525252,	// 73	0.286275 = 73/255
	0x3FD2929292929293,	// 74	0.290196 = 74/255
	0x3FD2D2D2D2D2D2D3,	// 75	0.294118 = 75/255
	0x3FD3131313131313,	// 76	0.298039 = 76/255
	0x3FD3535353535353,	// 77	0.301961 = 77/255
	0x3FD3939393939394,	// 78	0.305882 = 78/255
	0x3FD3D3D3D3D3D3D4,	// 79	0.309804 = 79/255
	0x3FD4141414141414,	// 80	0.313725 = 80/255
	0x3FD4545454545454,	// 81	0.317647 = 81/255
	0x3FD4949494949495,	// 82	0.321569 = 82/255
	0x3FD4D4D4D4D4D4D5,	// 83	0.32549 = 83/255
	0x3FD5151515151515,	// 84	0.329412 = 84/255
	0x3FD5555555555555,	// 85	0.333333 = 85/255
	0x3FD5959595959596,	// 86	0.337255 = 86/255
	0x3FD5D5D5D5D5D5D6,	// 87	0.341176 = 87/255
	0x3FD6161616161616,	// 88	0.345098 = 88/255
	0x3FD6565656565656,	// 89	0.34902 = 89/255
	0x3FD6969696969697,	// 90	0.352941 = 90/255
	0x3FD6D6D6D6D6D6D7,	// 91	0.356863 = 91/255
	0x3FD7171717171717,	// 92	0.360784 = 92/255
	0x3FD7575757575757,	// 93	0.364706 = 93/255
	0x3FD7979797979798,	// 94	0.368627 = 94/255
	0x3FD7D7D7D7D7D7D8,	// 95	0.372549 = 95/255
	0x3FD8181818181818,	// 96	0.376471 = 96/255
	0x3FD8585858585858,	// 97	0.380392 = 97/255
	0x3FD8989898989899,	// 98	0.384314 = 98/255
	0x3FD8D8D8D8D8D8D9,	// 99	0.388235 = 99/255
	0x3FD9191919191919,	// 100	0.392157 = 100/255
	0x3FD9595959595959,	// 101	0.396078 = 101/255
	0x3FD999999999999A,	// 102	0.4 = 102/255
	0x3FD9D9D9D9D9D9DA,	// 103	0.403922 = 103/255
	0x3FDA1A1A1A1A1A1A,	// 104	0.407843 = 104/255
	0x3FDA5A5A5A5A5A5A,	// 105	0.411765 = 105/255
	0x3FDA9A9A9A9A9A9B,	// 106	0.415686 = 106/255
	0x3FDADADADADADADB,	// 107	0.419608 = 107/255
	0x3FDB1B1B1B1B1B1B,	// 108	0.423529 = 108/255
	0x3FDB5B5B5B5B5B5B,	// 109	0.427451 = 109/255
	0x3FDB9B9B9B9B9B9C,	// 110	0.431373 = 110/255
	0x3FDBDBDBDBDBDBDC,	// 111	0.435294 = 111/255
	0x3FDC1C1C1C1C1C1C,	// 112	0.439216 = 112/255
	0x3FDC5C5C5C5C5C5C,	// 113	0.443137 = 113/255
	0x3FDC9C9C9C9C9C9D,	// 114	0.447059 = 114/255
	0x3FDCDCDCDCDCDCDD,	// 115	0.45098 = 115/255
	0x3FDD1D1D1D1D1D1D,	// 116	0.454902 = 116/255
	0x3FDD5D5D5D5D5D5D,	// 117	0.458824 = 117/255
	0x3FDD9D9D9D9D9D9E,	// 118	0.462745 = 118/255
	0x3FDDDDDDDDDDDDDE,	// 119	0.466667 = 119/255
	0x3FDE1E1E1E1E1E1E,	// 120	0.470588 = 120/255
	0x3FDE5E5E5E5E5E5E,	// 121	0.47451 = 121/255
	0x3FDE9E9E9E9E9E9F,	// 122	0.478431 = 122/255
	0x3FDEDEDEDEDEDEDF,	// 123	0.482353 = 123/255
	0x3FDF1F1F1F1F1F1F,	// 124	0.486275 = 124/255
	0x3FDF5F5F5F5F5F5F,	// 125	0.490196 = 125/255
	0x3FDF9F9F9F9F9FA0,	// 126	0.494118 = 126/255
	0x3FDFDFDFDFDFDFE0,	// 127	0.498039 = 127/255
	0x3FE0101010101010,	// 128	0.501961 = 128/255
	0x3FE0303030303030,	// 129	0.505882 = 129/255
	0x3FE0505050505050,	// 130	0.509804 = 130/255
	0x3FE0707070707070,	// 131	0.513725 = 131/255
	0x3FE0909090909091,	// 132	0.517647 = 132/255
	0x3FE0B0B0B0B0B0B1,	// 133	0.521569 = 133/255
	0x3FE0D0D0D0D0D0D1,	// 134	0.52549 = 134/255
	0x3FE0F0F0F0F0F0F1,	// 135	0.529412 = 135/255
	0x3FE1111111111111,	// 136	0.533333 = 136/255
	0x3FE1313131313131,	// 137	0.537255 = 137/255
	0x3FE1515151515151,	// 138	0.541176 = 138/255
	0x3FE1717171717171,	// 139	0.545098 = 139/255
	0x3FE1919191919192,	// 140	0.54902 = 140/255
	0x3FE1B1B1B1B1B1B2,	// 141	0.552941 = 141/255
	0x3FE1D1D1D1D1D1D2,	// 142	0.556863 = 142/255
	0x3FE1F1F1F1F1F1F2,	// 143	0.560784 = 143/255
	0x3FE2121212121212,	// 144	0.564706 = 144/255
	0x3FE2323232323232,	// 145	0.568627 = 145/255
	0x3FE2525252525252,	// 146	0.572549 = 146/255
	0x3FE2727272727272,	// 147	0.576471 = 147/255
	0x3FE2929292929293,	// 148	0.580392 = 148/255
	0x3FE2B2B2B2B2B2B3,	// 149	0.584314 = 149/255
	0x3FE2D2D2D2D2D2D3,	// 150	0.588235 = 150/255
	0x3FE2F2F2F2F2F2F3,	// 151	0.592157 = 151/255
	0x3FE3131313131313,	// 152	0.596078 = 152/255
	0x3FE3333333333333,	// 153	0.6 = 153/255
	0x3FE3535353535353,	// 154	0.603922 = 154/255
	0x3FE3737373737373,	// 155	0.607843 = 155/255
	0x3FE3939393939394,	// 156	0.611765 = 156/255
	0x3FE3B3B3B3B3B3B4,	// 157	0.615686 = 157/255
	0x3FE3D3D3D3D3D3D4,	// 158	0.619608 = 158/255
	0x3FE3F3F3F3F3F3F4,	// 159	0.623529 = 159/255
	0x3FE4141414141414,	// 160	0.627451 = 160/255
	0x3FE4343434343434,	// 161	0.631373 = 161/255
	0x3FE4545454545454,	// 162	0.635294 = 162/255
	0x3FE4747474747474,	// 163	0.639216 = 163/255
	0x3FE4949494949495,	// 164	0.643137 = 164/255
	0x3FE4B4B4B4B4B4B5,	// 165	0.647059 = 165/255
	0x3FE4D4D4D4D4D4D5,	// 166	0.65098 = 166/255
	0x3FE4F4F4F4F4F4F5,	// 167	0.654902 = 167/255
	0x3FE5151515151515,	// 168	0.658824 = 168/255
	0x3FE5353535353535,	// 169	0.662745 = 169/255
	0x3FE5555555555555,	// 170	0.666667 = 170/255
	0x3FE5757575757575,	// 171	0.670588 = 171/255
	0x3FE5959595959596,	// 172	0.67451 = 172/255
	0x3FE5B5B5B5B5B5B6,	// 173	0.678431 = 173/255
	0x3FE5D5D5D5D5D5D6,	// 174	0.682353 = 174/255
	0x3FE5F5F5F5F5F5F6,	// 175	0.686275 = 175/255
	0x3FE6161616161616,	// 176	0.690196 = 176/255
	0x3FE6363636363636,	// 177	0.694118 = 177/255
	0x3FE6565656565656,	// 178	0.698039 = 178/255
	0x3FE6767676767676,	// 179	0.701961 = 179/255
	0x3FE6969696969697,	// 180	0.705882 = 180/255
	0x3FE6B6B6B6B6B6B7,	// 181	0.709804 = 181/255
	0x3FE6D6D6D6D6D6D7,	// 182	0.713725 = 182/255
	0x3FE6F6F6F6F6F6F7,	// 183	0.717647 = 183/255
	0x3FE7171717171717,	// 184	0.721569 = 184/255
	0x3FE7373737373737,	// 185	0.72549 = 185/255
	0x3FE7575757575757,	// 186	0.729412 = 186/255
	0x3FE7777777777777,	// 187	0.733333 = 187/255
	0x3FE7979797979798,	// 188	0.737255 = 188/255
	0x3FE7B7B7B7B7B7B8,	// 189	0.741176 = 189/255
	0x3FE7D7D7D7D7D7D8,	// 190	0.745098 = 190/255
	0x3FE7F7F7F7F7F7F8,	// 191	0.74902 = 191/255
	0x3FE8181818181818,	// 192	0.752941 = 192/255
	0x3FE8383838383838,	// 193	0.756863 = 193/255
	0x3FE8585858585858,	// 194	0.760784 = 194/255
	0x3FE8787878787878,	// 195	0.764706 = 195/255
	0x3FE8989898989899,	// 196	0.768627 = 196/255
	0x3FE8B8B8B8B8B8B9,	// 197	0.772549 = 197/255
	0x3FE8D8D8D8D8D8D9,	// 198	0.776471 = 198/255
	0x3FE8F8F8F8F8F8F9,	// 199	0.780392 = 199/255
	0x3FE9191919191919,	// 200	0.784314 = 200/255
	0x3FE9393939393939,	// 201	0.788235 = 201/255
	0x3FE9595959595959,	// 202	0.792157 = 202/255
	0x3FE9797979797979,	// 203	0.796078 = 203/255
	0x3FE999999999999A,	// 204	0.8 = 204/255
	0x3FE9B9B9B9B9B9BA,	// 205	0.803922 = 205/255
	0x3FE9D9D9D9D9D9DA,	// 206	0.807843 = 206/255
	0x3FE9F9F9F9F9F9FA,	// 207	0.811765 = 207/255
	0x3FEA1A1A1A1A1A1A,	// 208	0.815686 = 208/255
	0x3FEA3A3A3A3A3A3A,	// 209	0.819608 = 209/255
	0x3FEA5A5A5A5A5A5A,	// 210	0.823529 = 210/255
	0x3FEA7A7A7A7A7A7A,	// 211	0.827451 = 211/255
	0x3FEA9A9A9A9A9A9B,	// 212	0.831373 = 212/255
	0x3FEABABABABABABB,	// 213	0.835294 = 213/255
	0x3FEADADADADADADB,	// 214	0.839216 = 214/255
	0x3FEAFAFAFAFAFAFB,	// 215	0.843137 = 215/255
	0x3FEB1B1B1B1B1B1B,	// 216	0.847059 = 216/255
	0x3FEB3B3B3B3B3B3B,	// 217	0.85098 = 217/255
	0x3FEB5B5B5B5B5B5B,	// 218	0.854902 = 218/255
	0x3FEB7B7B7B7B7B7B,	// 219	0.858824 = 219/255
	0x3FEB9B9B9B9B9B9C,	// 220	0.862745 = 220/255
	0x3FEBBBBBBBBBBBBC,	// 221	0.866667 = 221/255
	0x3FEBDBDBDBDBDBDC,	// 222	0.870588 = 222/255
	0x3FEBFBFBFBFBFBFC,	// 223	0.87451 = 223/255
	0x3FEC1C1C1C1C1C1C,	// 224	0.878431 = 224/255
	0x3FEC3C3C3C3C3C3C,	// 225	0.882353 = 225/255
	0x3FEC5C5C5C5C5C5C,	// 226	0.886275 = 226/255
	0x3FEC7C7C7C7C7C7C,	// 227	0.890196 = 227/255
	0x3FEC9C9C9C9C9C9D,	// 228	0.894118 = 228/255
	0x3FECBCBCBCBCBCBD,	// 229	0.898039 = 229/255
	0x3FECDCDCDCDCDCDD,	// 230	0.901961 = 230/255
	0x3FECFCFCFCFCFCFD,	// 231	0.905882 = 231/255
	0x3FED1D1D1D1D1D1D,	// 232	0.909804 = 232/255
	0x3FED3D3D3D3D3D3D,	// 233	0.913725 = 233/255
	0x3FED5D5D5D5D5D5D,	// 234	0.917647 = 234/255
	0x3FED7D7D7D7D7D7D,	// 235	0.921569 = 235/255
	0x3FED9D9D9D9D9D9E,	// 236	0.92549 = 236/255
	0x3FEDBDBDBDBDBDBE,	// 237	0.929412 = 237/255
	0x3FEDDDDDDDDDDDDE,	// 238	0.933333 = 238/255
	0x3FEDFDFDFDFDFDFE,	// 239	0.937255 = 239/255
	0x3FEE1E1E1E1E1E1E,	// 240	0.941176 = 240/255
	0x3FEE3E3E3E3E3E3E,	// 241	0.945098 = 241/255
	0x3FEE5E5E5E5E5E5E,	// 242	0.94902 = 242/255
	0x3FEE7E7E7E7E7E7E,	// 243	0.952941 = 243/255
	0x3FEE9E9E9E9E9E9F,	// 244	0.956863 = 244/255
	0x3FEEBEBEBEBEBEBF,	// 245	0.960784 = 245/255
	0x3FEEDEDEDEDEDEDF,	// 246	0.964706 = 246/255
	0x3FEEFEFEFEFEFEFF,	// 247	0.968627 = 247/255
	0x3FEF1F1F1F1F1F1F,	// 248	0.972549 = 248/255
	0x3FEF3F3F3F3F3F3F,	// 249	0.976471 = 249/255
	0x3FEF5F5F5F5F5F5F,	// 250	0.980392 = 250/255
	0x3FEF7F7F7F7F7F7F,	// 251	0.984314 = 251/255
	0x3FEF9F9F9F9F9FA0,	// 252	0.988235 = 252/255
	0x3FEFBFBFBFBFBFC0,	// 253	0.992157 = 253/255
	0x3FEFDFDFDFDFDFE0,	// 254	0.996078 = 254/255
	0x3FF0000000000000	// 255	1 = 255/255
};


#ifdef __cplusplus
}
#endif

